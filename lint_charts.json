[{"filePath":"C:\\Users\\roman\\Projects\\smart-budget\\src\\components\\Charts.jsx","messages":[{"ruleId":"prettier/prettier","severity":2,"message":"Replace `·className=\"relative·w-full·h-[250px]\"·style={{·minHeight:·'250px',·minWidth:·0·}}` with `␍⏎····················className=\"relative·w-full·h-[250px]\"␍⏎····················style={{·minHeight:·'250px',·minWidth:·0·}}␍⏎················`","line":79,"column":21,"nodeType":null,"messageId":"replace","endLine":79,"endColumn":103,"fix":{"range":[2636,2718],"text":"\r\n                    className=\"relative w-full h-[250px]\"\r\n                    style={{ minHeight: '250px', minWidth: 0 }}\r\n                "}}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import React, { useState, useMemo, memo, useCallback } from 'react';\r\nimport {\r\n    PieChart,\r\n    Pie,\r\n    Cell,\r\n    ResponsiveContainer,\r\n    Tooltip,\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n} from 'recharts';\r\n\r\n// --- OPTIMIZATION: Moved helpers outside component to ensure stability ---\r\n\r\nimport { getColorHex } from '../utils/colors';\r\n\r\nimport CategoryItem from './CategoryItem';\r\n\r\nconst processData = (data, total, getCategoryName, otherLabel) => {\r\n    if (!data || total === 0) return [];\r\n    const threshold = 0.03;\r\n    let mainSegments = [];\r\n    let otherTotal = 0;\r\n\r\n    data.forEach((item) => {\r\n        const percentage = item.total / total;\r\n        if (percentage < threshold) {\r\n            otherTotal += item.total;\r\n        } else {\r\n            const displayName = getCategoryName ? getCategoryName(item) : item.name;\r\n            mainSegments.push({\r\n                name: displayName,\r\n                value: item.total,\r\n                color: item.color ? item.color.replace('bg-', '') : 'gray',\r\n                originalColor: item.color,\r\n                percentage: (percentage * 100).toFixed(1),\r\n            });\r\n        }\r\n    });\r\n\r\n    if (otherTotal > 0) {\r\n        mainSegments.push({\r\n            name: otherLabel || 'Other',\r\n            value: otherTotal,\r\n            color: 'gray',\r\n            originalColor: 'bg-slate-400',\r\n            percentage: ((otherTotal / total) * 100).toFixed(1),\r\n            isOther: true,\r\n        });\r\n    }\r\n\r\n    return mainSegments.sort((a, b) => b.value - a.value);\r\n};\r\n\r\nexport const SimpleDonutChart = memo(\r\n    ({ data, total, currencyCode, formatMoney, label, getCategoryName, otherLabel }) => {\r\n        const [activeIndex, setActiveIndex] = useState(null);\r\n\r\n        const chartData = useMemo(\r\n            () => processData(data, total, getCategoryName, otherLabel),\r\n            [data, total, getCategoryName, otherLabel]\r\n        );\r\n\r\n        const onPieEnter = useCallback((_, index) => setActiveIndex(index), []);\r\n        const onPieLeave = useCallback(() => setActiveIndex(null), []);\r\n\r\n        const centerLabel = activeIndex !== null ? chartData[activeIndex].name : label;\r\n        const centerValue =\r\n            activeIndex !== null\r\n                ? formatMoney(chartData[activeIndex].value, currencyCode)\r\n                : formatMoney(total, currencyCode);\r\n\r\n        if (total === 0) return <div className=\"text-center text-slate-400 py-10\">No data</div>;\r\n\r\n        return (\r\n            <div className=\"w-full flex flex-col items-center animate-in fade-in duration-500\">\r\n                <div className=\"relative w-full h-[250px]\" style={{ minHeight: '250px', minWidth: 0 }}>\r\n                    <ResponsiveContainer width=\"99%\" height=\"100%\">\r\n                        <PieChart>\r\n                            <Pie\r\n                                data={chartData}\r\n                                cx=\"50%\"\r\n                                cy=\"50%\"\r\n                                innerRadius={60}\r\n                                outerRadius={80}\r\n                                paddingAngle={5}\r\n                                dataKey=\"value\"\r\n                                onMouseEnter={onPieEnter}\r\n                                onMouseLeave={onPieLeave}\r\n                                onClick={onPieEnter}\r\n                                cornerRadius={6}\r\n                                stroke=\"none\"\r\n                                cursor=\"pointer\"\r\n                            >\r\n                                {chartData.map((entry, index) => (\r\n                                    <Cell\r\n                                        key={`cell-${index}`}\r\n                                        fill={getColorHex(entry.originalColor)}\r\n                                        className=\"transition-all duration-300 focus:outline-none\"\r\n                                        style={{\r\n                                            filter:\r\n                                                activeIndex === index\r\n                                                    ? 'drop-shadow(0px 0px 8px rgba(0,0,0,0.2))'\r\n                                                    : 'none',\r\n                                            opacity:\r\n                                                activeIndex !== null && activeIndex !== index\r\n                                                    ? 0.6\r\n                                                    : 1,\r\n                                            transform:\r\n                                                activeIndex === index ? 'scale(1.05)' : 'scale(1)',\r\n                                            transformOrigin: 'center center',\r\n                                        }}\r\n                                    />\r\n                                ))}\r\n                            </Pie>\r\n                        </PieChart>\r\n                    </ResponsiveContainer>\r\n\r\n                    <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\r\n                        <span className=\"text-xs text-slate-500 uppercase tracking-wider font-bold mb-1 text-center px-4 truncate w-full\">\r\n                            {centerLabel}\r\n                        </span>\r\n                        <span className=\"text-2xl font-bold text-slate-800 dark:text-white\">\r\n                            {centerValue}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"w-full mt-4 space-y-3\">\r\n                    {chartData.map((item, index) => (\r\n                        <CategoryItem\r\n                            key={index}\r\n                            item={item}\r\n                            index={index}\r\n                            isActive={activeIndex === index}\r\n                            onActivate={setActiveIndex}\r\n                            onDeactivate={() => setActiveIndex(null)}\r\n                            currencyCode={currencyCode}\r\n                            formatMoney={formatMoney}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n);\r\n\r\nexport const SimpleBarChart = memo(({ data, currency }) => {\r\n    const chartData = useMemo(() => (data ? [...data] : []), [data]);\r\n\r\n    if (!data || data.length === 0) return null;\r\n\r\n    return (\r\n        <div className=\"w-full h-[200px] mt-4\" style={{ minHeight: '200px', minWidth: 0 }}>\r\n            <ResponsiveContainer width=\"99%\" height=\"100%\">\r\n                <BarChart data={chartData}>\r\n                    <CartesianGrid\r\n                        strokeDasharray=\"3 3\"\r\n                        vertical={false}\r\n                        stroke=\"#e2e8f0\"\r\n                        strokeOpacity={0.5}\r\n                    />\r\n                    <XAxis\r\n                        dataKey=\"label\"\r\n                        axisLine={false}\r\n                        tickLine={false}\r\n                        tick={{ fontSize: 10, fill: '#94a3b8' }}\r\n                        dy={10}\r\n                    />\r\n                    <YAxis hide={true} />\r\n                    <Tooltip\r\n                        cursor={{ fill: 'rgba(0,0,0,0.05)' }}\r\n                        contentStyle={{\r\n                            borderRadius: '12px',\r\n                            border: 'none',\r\n                            boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)',\r\n                            backgroundColor: 'white',\r\n                            color: '#1e293b',\r\n                        }}\r\n                        formatter={(value) => [\r\n                            new Intl.NumberFormat('en-US', {\r\n                                style: 'currency',\r\n                                currency: currency,\r\n                            }).format(value),\r\n                            '',\r\n                        ]}\r\n                    />\r\n                    <Bar\r\n                        dataKey=\"income\"\r\n                        fill=\"#10B981\"\r\n                        radius={[4, 4, 0, 0]}\r\n                        barSize={20}\r\n                        name=\"Income\"\r\n                        animationDuration={1000}\r\n                    />\r\n                    <Bar\r\n                        dataKey=\"expense\"\r\n                        fill=\"#EF4444\"\r\n                        radius={[4, 4, 0, 0]}\r\n                        barSize={20}\r\n                        name=\"Expense\"\r\n                        animationDuration={1000}\r\n                    />\r\n                </BarChart>\r\n            </ResponsiveContainer>\r\n        </div>\r\n    );\r\n});\r\n","usedDeprecatedRules":[]}]
